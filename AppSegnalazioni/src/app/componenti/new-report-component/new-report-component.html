<form class="report-form" [formGroup]="reportForm" (ngSubmit)="postReport()">

  <!-- MAPPA -->
  <div id="map" style="height: 300px; margin-bottom: 16px;"></div>

  <!-- TITOLO -->
  <mat-form-field appearance="outline">
    <mat-label>Report Title</mat-label>
    <input matInput type="text" formControlName="title" />
  </mat-form-field>

  <!-- DESCRIZIONE -->
  <mat-form-field appearance="outline">
    <mat-label>Report Description</mat-label>
    <textarea formControlName="description" matInput></textarea>
  </mat-form-field>

  <!-- CATEGORIE -->
  <div class="cat-container" formArrayName="categories">
    <div *ngFor="let category of categories.controls; let i = index">
      <mat-form-field appearance="outline">
        <mat-label>Report Category</mat-label>
        <mat-select [formControlName]="i">
          <mat-option *ngFor="let name of categoryNames" [value]="name">
            {{ name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <button mat-fab type="button" (click)="removeCategoryInput(i)" class="remove-button">
        <mat-icon>delete</mat-icon>
      </button>
    </div>

    <button mat-button type="button" (click)="addCategoryInput()" class="add-button">
      Aggiungi Categoria
    </button>
  </div>

  <!-- DATA -->
  <mat-form-field appearance="outline">
    <mat-label>Report Date</mat-label>
    <input matInput type="datetime-local" formControlName="date" />
  </mat-form-field>

  <!-- IMMAGINI -->
  <input type="file" accept="image/*" (change)="onImageSelected($event)" capture="environment" />
  <div class="gallery">
    <img *ngFor="let image of images" [src]="image" alt="immagine report" />
  </div>

  <!-- LATITUDINE E LONGITUDINE (readonly) -->
  <mat-form-field appearance="outline">
    <mat-label>Latitude</mat-label>
    <input matInput formControlName="latitude" readonly />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Longitude</mat-label>
    <input matInput formControlName="longitude" readonly />
  </mat-form-field>

  <!-- SUBMIT -->
  <button mat-button [disabled]="!reportForm.valid" type="submit" class="submit-button">
    Submit Report
  </button>

</form>
